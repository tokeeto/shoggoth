#:kivy 2.0.0
#:import os os
#:import ui shoggoth.ui
#:import Factory kivy.factory.Factory

<TextInput>:
    write_tab: False
    font_size: '16dp'
    size_hint_y: None
    height: '32dp'
    multiline: False

<BoxLayout>:
    spacing: '5dp'

<Button>:
    font_size: '16dp'
    size_hint_y: None
    height: '32dp'

<DropDownButton@Button>:
    size_hint_y: None
    height: '30dp'

<TemplateSelector>:
    title: 'Select Template'
    size_hint: .4,.4
    ScrollView:
        BoxLayout:
            height: self.minimum_height
            size_hint_y: None
            orientation: 'vertical'
            Label:
                size_hint_y: None
                height: '32dp'
                text: 'Investigator'
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'investigator'
                on_release: root.select(self.text)
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'asset'
                on_release: root.select(self.text)
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'event'
                on_release: root.select(self.text)
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'skill'
                on_release: root.select(self.text)
            Label:
                size_hint_y: None
                height: '32dp'
                text: 'Story'
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'story'
                on_release: root.select(self.text)
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'treachery'
                on_release: root.select(self.text)
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'enemy'
                on_release: root.select(self.text)
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'location'
                on_release: root.select(self.text)
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'act'
                on_release: root.select(self.text)
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'agenda'
                on_release: root.select(self.text)
            Button:
                size_hint_y: None
                height: '32dp'
                text: 'scenario'
                on_release: root.select(self.text)

<SetSelector>:
    title: 'Select Encounter Set'
    size_hint: .4,.4
    ScrollView:
        BoxLayout:
            height: self.minimum_height
            size_hint_y: None
            orientation: 'vertical'
            id: option_container

<ClassSelector>:
    DropDownButton:
        text: 'guardian'
        on_release: root.select_value(self.text)
    DropDownButton:
        text: 'seeker'
        on_release: root.select_value(self.text)
    DropDownButton:
        text: 'rogue'
        on_release: root.select_value(self.text)
    DropDownButton:
        text: 'survivor'
        on_release: root.select_value(self.text)
    DropDownButton:
        text: 'mystic'
        on_release: root.select_value(self.text)

<CardPreview>:
    padding: '10dp'
    TabbedPanel:
        background_color: 0,0,0,0
        do_default_tab: False

        TabbedPanelItem:
            text: 'Front'
            Image:
                id: front_preview
                color: [0,0,0,0] if not self.texture else [1,1,1,1]

        TabbedPanelItem:
            text: 'Back'
            Image:
                id: back_preview
                color: [0,0,0,0] if not self.texture else [1,1,1,1]

<AboutPopup@Popup>:
    title: 'About Shoggoth'
    size_hint: 0.5, 0.5

    Label:
        text: ui.about_text
        text_size: self.width, None
        size: self.texture_size
        markup: True
        on_ref_press: ui.goto_ref(args)

<NewProjectPopup@Popup>:
    title: 'New Project'
    size_hint: 0.5, 0.5
    file_name: file_name

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: '32dp'

            Label:
                size_hint_x: 0.2
                text: 'abbreviation'
            TextInput:
                size_hint_x: 0.8
                id: code

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: '32dp'
            Label:
                size_hint_x: 0.2
                text: 'name'
            TextInput:
                size_hint_x: 0.8
                id: name

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: '32dp'
            Label:
                size_hint_x: 0.2
                text: 'Icon'
            TextInput:
                size_hint_x: 0.6
                id: icon
                value: ''
                disabled: True
            Button:
                size_hint_x: 0.2
                text: 'Select icon'
                on_release: icon.text = ui.open_image()

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: '32dp'
            Label:
                size_hint_x: 0.2
                text: 'File name'
            TextInput:
                size_hint_x: 0.6
                id: file_name
                size_hint_y: None
                disabled: True
            Button:
                size_hint_x: 0.2
                text: 'Browse'
                on_release: file_name = ui.save_project_dialog()

        BoxLayout:
            size_hint_y: None
            height: '48dp'

            Button:
                text: 'Cancel'
                on_release: root.dismiss()

            Button:
                text: 'Create'
                on_release: root.save()

<GotoEntryListItem>:
    orientation: 'horizontal'
    size_hint_y: None
    height: '32dp'
    size_hint_x: 1
    on_release: root.callback(root.entry)
    Label:
        text: root.entry.name
    Label:
        text: root.entry.type
    Label:
        text: root.entry.id

<GotoPopup@Popup>
    title: 'Go to line'
    size_hint: None, None
    size: '700dp', '700dp'
    BoxLayout:
        orientation: 'vertical'
        TextInput:
            id: input
            hint_text: 'Card name'
            size_hint_y: None
            height: '32dp'
        ScrollView:
            size_hint: 1, 1
            BoxLayout:
                orientation: 'vertical'
                id: list
                size_hint_y: None
                height: self.minimum_height

<TreeViewLabel>:
    full_path: ''
    color: .95, .95, .95, 1
    font_size: '14dp'

<TreeViewButton>:
    background_color: 0,0,0,0
    color_selected: 0,0,0,.3

<TopMenu@AppMenu>:
    top: root.parent.height
    cancel_handler_widget: root.parent
    AppMenuTextItem:
        text: 'File'
        ContextMenu:
            width: '200dp'
            ContextMenuTextItem:
                text: 'Open Project'
                on_release: app.open_project_dialog()
            ContextMenuTextItem:
                text: 'New Project'
                on_release: app.new_project_dialog()
            ContextMenuTextItem:
                text: 'Save (Ctrl+S)'
                on_release: app.save_changes()
            ContextMenuTextItem:
                text: 'New Card (Ctrl+N)'
                on_release: app.open_new_card_dialog()
            ContextMenuTextItem:
                text: 'Gather images'
                on_release: app.gather_images()
            ContextMenuTextItem:
                text: 'Gather images and update'
                on_release: app.gather_images(update=True)
            ContextMenuTextItem:
                text: 'Export Current Card (Ctrl+E)'
                on_release: app.export_current()
            ContextMenuTextItem:
                text: 'Export All Cards (Ctrl+Shift+E)'
                on_release: app.export_all()
            ContextMenuDivider:
            ContextMenuTextItem:
                text: 'Exit'
                on_release: app.stop()

    AppMenuTextItem:
        text: 'Help'
        ContextMenu:
            width: '200dp'
            ContextMenuTextItem:
                text: 'About'
                on_release: app.show_about_dialog()
    AppMenuTextItem:
        text: 'Project: ' + (app.current_project.get('name') if app.current_project else 'None')


<ShoggothRoot>:
    canvas:
        Rectangle:
            source: root.bg_path
            size: self.size
            pos: self.pos

    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1,1
        padding: [0,'26dp',0,'24dp']

        # File Browser Panel (left)
        Splitter:
            sizable_from: 'right'
            size_hint_x: None
            width: 350

            FileBrowser:
                id: file_browser

        # Editor Panel (middle)
        BoxLayout:
            id: editor_container
            padding: ['5dp','10dp']

        # Card Preview Panel (right)
        Splitter:
            sizable_from: 'left'
            size_hint_x: None
            min_size: 400

            CardPreview:
                id: card_preview
    TopMenu:
        id: top_menu
        size_hint: 1, None

    # Status bar
    Label:
        pos_hint: {'x': 0, 'bottom': 1}
        size_hint: 1, None
        id: status_bar
        text: app.status_message
        size_hint_y: None
        height: '24dp'
        text_size: self.size
        halign: 'left'
        padding: '10dp', 0
        canvas.before:
            Color:
                rgba: 0,0,0,.3
            Rectangle:
                size: self.size
                pos: self.pos

<FileBrowser>:
    tree: tree
    orientation: 'vertical'
    canvas:
        Color:
            rgba: 1,1,1,0
        Rectangle:
            source: None
            size: self.size
            pos: self.pos
        Color:
            rgba: 1,1,1,1


    Label:
        text: 'Files'
        size_hint_y: None
        height: '30dp'
        font_size: '16sp'
        bold: True

    ScrollView:
        do_scroll_x: False

        TreeView:
            id: tree
            hide_root: True
            size_hint_y: None
            height: self.minimum_height
            on_selected_node: root.on_selected_node()

<FileField@BoxLayout>:
    orientation: 'horizontal'
    text: ''
    path: ''
    size_hint_y: None
    height: 30

    Label:
        size_hint_x: None
        width: 100
        text: root.text
    TextInput:
        text: root.path
    Button:
        size_hint_x: None
        width: 40
        text: '📁'
        on_press: root.path = ui.open_file()

<NewEncounterPopup>:
    size_hint: .4,.4
    title: 'Add new Encounter Set'
    name: name
    error: error
    on_open: name.focus = True
    BoxLayout:
        orientation: 'vertical'
        TextInput:
            id: name
            multiline: False
            on_text_validate: root.create()
        Label:
            id: error
            text: ''
            size_hint_y: None
            height: '0dp'
            on_text: self.height = '28dp'
        Button:
            text: 'Create'
            on_release: root.create()

<OkPopup>:
    title: 'ERROR'
    size_hint: .4, .6
    BoxLayout:
        orientation: 'vertical'
        ScrollView:
            Label:
                size_hint_y: None
                text: root.text
                text_size: self.width, None
                size: self.texture_size
                markup: True
        Button:
            text: 'Ok'
            size_hint: None, None
            size: '100dp', '28dp'
            on_release: root.dismiss()

<NewCardPopup>:
    title: 'Add new card'
    name: name
    size_hint: .75, .75
    on_open: name.focus = True
    selected_template: 'asset'
    selected_collection: None
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1,1
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: '28dp'
            Label:
                text: 'Name'
            TextInput:
                id: name
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: '28dp'
            Label:
                text: 'Template'
            Label:
                text: 'asset'
                id: template
            Button:
                text: 'Select Template'
                on_release: ui.TemplateSelector(callback=root.set_template).open()
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: '28dp'
            Label:
                text: 'Set'
            Label:
                text: 'Player card'
                id: set_text
            Button:
                text: 'Select Set'
                on_release: ui.SetSelector(callback=root.set_encounter_set).open()
        Button:
            size_hint_y: None
            height: '28dp'
            text: 'Create'
            on_release: root.create()

<ProjectEditor>:
    orientation: 'vertical'
    TextEditLine:
        size_hint_y: None
        text: 'Name'
        field: root.project.get('name', '')
    FileField:
        size_hint_y: None
        text: 'Icon'
        path: root.project.get('icon', '')
    Button:
        size_hint_y: None
        text: 'Add Encounter set'
        on_release: root.show_new_encounter_popup()
    ScrollView:
        size_hint: 1, 1
        GridLayout:
            size_hint_y: None
            height: self.minimum_height
            cols: 3
            id: thumbnail_grid

<EncounterEditor>:
    orientation: 'vertical'
    TextEditLine:
        size_hint_y: None
        text: 'Name'
        field: root.encounter.get('name', '')
    TextEditLine:
        size_hint_y: None
        text: 'Icon'
        field: root.encounter.get('icon', '')
    Button:
        size_hint_y: None
        text: 'Delete set'
    ScrollView:
        size_hint: 1, 1
        GridLayout:
            size_hint_y: None
            height: self.minimum_height
            cols: 3
            id: thumbnail_grid

<CardEditor>:
    front_editor_container: front_editor_container
    back_editor_container: back_editor_container
    orientation: 'vertical'
    padding: '10dp'
    spacing: '5dp'

    TabbedPanel:
        do_default_tab: False
        background_color: 0,0,0,0
        TabbedPanelItem:
            text: 'Basic'
            ScrollView:
                BoxLayout:
                    orientation: 'vertical'

                    TextEditLine:
                        text: 'Name'
                        id: name
                    TextEditLine:
                        text: 'Amount in set'
                        id: amount
                    TextEditLine:
                        text: 'Collection Number'
                        id: collection_number


        TabbedPanelItem:
            text: 'Front'
            ScrollView:
                id: front_editor_container
        TabbedPanelItem:
            text: 'Back'
            ScrollView:
                id: back_editor_container

<TextEditLine@BoxLayout>:
    input: input
    text: ''
    orientation: 'horizontal'
    size_hint_y: None
    height: '30dp'
    Label:
        size_hint_x: None
        width: '110dp'
        text: root.text
        halign: 'left'
        valign: 'middle'
        text_size: self.size
    TextInput:
        id: input
        text: ''

<TextEditArea@BoxLayout>:
    orientation: 'horizontal'
    input: input
    text: ''
    size_hint_y: None
    height: '140dp'
    Label:
        size_hint_x: None
        width: '110dp'
        text: root.text
        halign: 'left'
        valign: 'middle'
        text_size: self.size
    TextInput:
        id: input
        text: ''
        multiline: True
        size_hint_y: None
        height: '140dp'

<FaceEditor>:
    BoxLayout:
        id: layout
        orientation: 'vertical'
        spacing: '5dp'

        TextEditLine:
            text: 'Type'
            id: type
            Button:
                text: 'Select type'
                on_release: context_menu.show(*self.pos)
    TypeSelectDropdown:
        target: type
        id: context_menu
        visible: False
        cancel_handler_widget: layout


<-AssetEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'Type'
                id: type
            TextEditLine:
                text: 'Name'
                id: name
            TextEditLine:
                text: 'Subtitle'
                id: subtitle

            GridLayout:
                cols: 2
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'Traits'
                    id: traits
                TextEditLine:
                    text: 'Class'
                    id: classes
                TextEditLine:
                    text: 'Cost'
                    id: cost
                TextEditLine:
                    text: 'Level'
                    id: level
                TextEditLine:
                    text: 'Health'
                    id: health
                TextEditLine:
                    text: 'Sanity'
                    id: sanity
                TextEditLine:
                    text: 'Slots'
                    id: slots
            TextEditArea:
                text: 'Text'
                id: text
            TextEditArea:
                text: 'Flavor'
                id: flavor_text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-EventEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'subtitle'
                id: subtitle

            GridLayout:
                cols: 2
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'traits'
                    id: traits
                TextEditLine:
                    text: 'class'
                    id: card_class
                TextEditLine:
                    text: 'classes'
                    id: classes
                TextEditLine:
                    text: 'cost'
                    id: cost
                TextEditLine:
                    text: 'level'
                    id: level
            TextEditArea:
                text: 'text'
                id: text
            TextEditArea:
                text: 'flavor_text'
                id: flavor_text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-SkillEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'subtitle'
                id: subtitle

            GridLayout:
                cols: 2
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'traits'
                    id: traits
                TextEditLine:
                    text: 'class'
                    id: card_class
                TextEditLine:
                    text: 'classes'
                    id: classes
                TextEditLine:
                    text: 'level'
                    id: level
            TextEditArea:
                text: 'text'
                id: text
            TextEditArea:
                text: 'flavor_text'
                id: flavor_text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-InvestigatorEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'subtitle'
                id: subtitle

            GridLayout:
                cols: 2
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'traits'
                    id: traits
                TextEditLine:
                    text: 'class'
                    id: card_class
                TextEditLine:
                    text: 'classes'
                    id: classes
            TextEditArea:
                text: 'text'
                id: text
            TextEditArea:
                text: 'flavor_text'
                id: flavor_text

            GridLayout:
                cols: 4
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'willpower'
                    id: willpower
                TextEditLine:
                    text: 'intellect'
                    id: intellect
                TextEditLine:
                    text: 'combat'
                    id: combat
                TextEditLine:
                    text: 'agility'
                    id: agility

            TextEditLine:
                text: 'health'
                id: health
            TextEditLine:
                text: 'sanity'
                id: sanity

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-InvestigatorBackEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'subtitle'
                id: subtitle

            GridLayout:
                cols: 2
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'traits'
                    id: traits
                TextEditLine:
                    text: 'Class'
                    id: classes
            TextEditLine:
                text: 'Heading'
                id: heading1
            TextEditArea:
                text: 'Text'
                id: text1
            TextEditLine:
                text: 'Heading'
                id: heading2
            TextEditArea:
                text: 'Text'
                id: text2
            TextEditLine:
                text: 'Heading'
                id: heading3
            TextEditArea:
                text: 'Text'
                id: text3
            TextEditLine:
                text: 'Heading'
                id: heading4
            TextEditArea:
                text: 'Text'
                id: text4
            TextEditLine:
                text: 'Heading'
                id: heading5
            TextEditArea:
                text: 'Text'
                id: text5
            TextEditLine:
                text: 'Heading'
                id: heading6
            TextEditArea:
                text: 'Text'
                id: text6
            TextEditArea:
                text: 'flavor_text'
                id: flavor_text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-LocationEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'subtitle'
                id: subtitle

            GridLayout:
                cols: 2
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'traits'
                    id: traits
                TextEditLine:
                    text: 'connection'
                    id: connection
                TextEditLine:
                    text: 'connections'
                    id: connections
                TextEditLine:
                    text: 'shroud'
                    id: shroud
                TextEditLine:
                    text: 'clues'
                    id: clues
            TextEditArea:
                text: 'text'
                id: text
            TextEditArea:
                text: 'flavor_text'
                id: flavor_text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-LocationBackEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'subtitle'
                id: subtitle

            GridLayout:
                cols: 2
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'traits'
                    id: traits
                TextEditLine:
                    text: 'connection'
                    id: connection
                TextEditLine:
                    text: 'connections'
                    id: connections
            TextEditArea:
                text: 'text'
                id: text
            TextEditArea:
                text: 'flavor_text'
                id: flavor_text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-EnemyEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'subtitle'
                id: subtitle

            GridLayout:
                cols: 2
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'traits'
                    id: traits
                TextEditLine:
                    text: 'attack'
                    id: attack
                TextEditLine:
                    text: 'health'
                    id: health
                TextEditLine:
                    text: 'evade'
                    id: evade
                TextEditLine:
                    text: 'damage'
                    id: damage
                TextEditLine:
                    text: 'horror'
                    id: horror
            TextEditArea:
                text: 'text'
                id: text
            TextEditArea:
                text: 'flavor_text'
                id: flavor_text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-TreacheryEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'subtitle'
                id: subtitle

            GridLayout:
                cols: 2
                size_hint_y: None
                height: self.minimum_height
                spacing: '5dp'

                TextEditLine:
                    text: 'traits'
                    id: traits
            TextEditArea:
                text: 'text'
                id: text
            TextEditArea:
                text: 'flavor_text'
                id: flavor_text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-ActEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'index'
                id: index
            TextEditLine:
                text: 'Clues'
                id: clues
            TextEditArea:
                text: 'Story'
                id: flavor_text
            TextEditArea:
                text: 'Text'
                id: text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-ActBackEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'index'
                id: index
            TextEditArea:
                text: 'Story'
                id: flavor_text
            TextEditArea:
                text: 'Text'
                id: text

<-AgendaEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'index'
                id: index
            TextEditLine:
                text: 'doom'
                id: doom
            TextEditArea:
                text: 'Story'
                id: flavor_text
            TextEditArea:
                text: 'Text'
                id: text
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Image path'
                    id: illustration
                Button:
                    size_hint_x: None
                    width: '100dp'
                    text: 'Browse'
                    on_release: illustration.input.text = ui.open_image()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: self.minimum_height
                TextEditLine:
                    text: 'Pan Y'
                    id: illustration_pan_y
                TextEditLine:
                    text: 'Pan X'
                    id: illustration_pan_x
                TextEditLine:
                    text: 'Scale'
                    id: illustration_scale

<-AgendaBackEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'index'
                id: index
            TextEditArea:
                text: 'Story'
                id: flavor_text
            TextEditArea:
                text: 'Text'
                id: text


<-ChaosEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'difficulty'
                id: difficulty
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Token'
                    id: token1
                TextEditLine:
                    text: 'Text'
                    id: text1
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Token'
                    id: token2
                TextEditLine:
                    text: 'Text'
                    id: text2
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Token'
                    id: token3
                TextEditLine:
                    text: 'Text'
                    id: text3
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Token'
                    id: token4
                TextEditLine:
                    text: 'Text'
                    id: text4
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Token'
                    id: token5
                TextEditLine:
                    text: 'Text'
                    id: text5

<-CustomizableEditor>:
    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: '5dp'

            TextEditLine:
                text: 'type'
                id: type
            TextEditLine:
                text: 'name'
                id: name
            TextEditLine:
                text: 'Additional Text'
                id: text
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes1
                TextEditLine:
                    text: 'Name'
                    id: name1
            TextEditArea:
                text: 'Text'
                id: text1
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes2
                TextEditLine:
                    text: 'Name'
                    id: name2
            TextEditArea:
                text: 'Text'
                id: text2
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes3
                TextEditLine:
                    text: 'Name'
                    id: name3
            TextEditArea:
                text: 'Text'
                id: text3
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes4
                TextEditLine:
                    text: 'Name'
                    id: name4
            TextEditArea:
                text: 'Text'
                id: text4
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes5
                TextEditLine:
                    text: 'Name'
                    id: name5
            TextEditArea:
                text: 'Text'
                id: text5
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes6
                TextEditLine:
                    text: 'Name'
                    id: name6
            TextEditArea:
                text: 'Text'
                id: text6
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes7
                TextEditLine:
                    text: 'Name'
                    id: name7
            TextEditArea:
                text: 'Text'
                id: text7
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes8
                TextEditLine:
                    text: 'Name'
                    id: name8
            TextEditArea:
                text: 'Text'
                id: text8
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes9
                TextEditLine:
                    text: 'Name'
                    id: name9
            TextEditArea:
                text: 'Text'
                id: text9
            BoxLayout:
                size_hint_y: None
                height: self.minimum_height
                orientation: "horizontal"
                TextEditLine:
                    text: 'Boxes'
                    id: boxes10
                TextEditLine:
                    text: 'Name'
                    id: name10
            TextEditArea:
                text: 'Text'
                id: text10
